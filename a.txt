============================= test session starts =============================
platform win32 -- Python 3.9.11, pytest-6.2.4, py-1.11.0, pluggy-0.13.1 -- C:\dev\api_yatube\venv\Scripts\python.exe
django: settings: yatube_api.settings (from ini)
rootdir: C:\dev\api_yatube, configfile: pytest.ini, testpaths: tests/
plugins: django-4.4.0, pythonpath-0.7.3
collecting ... collected 49 items

tests/test_auth.py::TestAuthAPI::test_auth PASSED                        [  2%]
tests/test_auth.py::TestAuthAPI::test_auth_with_invalid_data PASSED      [  4%]
tests/test_comment.py::TestCommentAPI::test_comments_not_found PASSED    [  6%]
tests/test_comment.py::TestCommentAPI::test_comments_get_unauth PASSED   [  8%]
tests/test_comment.py::TestCommentAPI::test_comment_author_and_post_are_read_only PASSED [ 10%]
tests/test_comment.py::TestCommentAPI::test_comments_id_available PASSED [ 12%]
tests/test_comment.py::TestCommentAPI::test_comments_id_unauth_get PASSED [ 14%]
tests/test_comment.py::TestCommentAPI::test_comment_id_auth_get PASSED   [ 16%]
tests/test_post.py::TestPostAPI::test_post_not_found PASSED              [ 18%]
tests/test_post.py::TestPostAPI::test_post_not_auth PASSED               [ 20%]
tests/test_post.py::TestPostAPI::test_post_get_current PASSED            [ 22%]
tests/test_comment.py::TestCommentAPI::test_comments_get PASSED          [ 24%]
tests/test_comment.py::TestCommentAPI::test_comments_post_auth_with_valid_data PASSED [ 26%]
tests/test_comment.py::TestCommentAPI::test_comments_auth_post_with_invalid_data PASSED [ 28%]
tests/test_comment.py::TestCommentAPI::test_comment_change_by_auth_with_valid_data[put] PASSED [ 30%]
tests/test_comment.py::TestCommentAPI::test_comment_change_by_auth_with_valid_data[patch] PASSED [ 32%]
tests/test_comment.py::TestCommentAPI::test_comment_change_by_not_author_with_valid_data[put] PASSED [ 34%]
tests/test_comment.py::TestCommentAPI::test_comment_change_by_not_author_with_valid_data[patch] PASSED [ 36%]
tests/test_comment.py::TestCommentAPI::test_comment_change_not_auth_with_valid_data[put] PASSED [ 38%]
tests/test_comment.py::TestCommentAPI::test_comment_change_not_auth_with_valid_data[patch] PASSED [ 40%]
tests/test_comment.py::TestCommentAPI::test_comment_delete_by_author PASSED [ 42%]
tests/test_comment.py::TestCommentAPI::test_comment_delete_by_unauth PASSED [ 44%]
tests/test_group.py::TestGroupAPI::test_group_not_found PASSED           [ 46%]
tests/test_group.py::TestGroupAPI::test_group_not_auth PASSED            [ 48%]
tests/test_group.py::TestGroupAPI::test_group_auth_get PASSED            [ 51%]
tests/test_group.py::TestGroupAPI::test_group_create FAILED              [ 53%]
tests/test_group.py::TestGroupAPI::test_group_get_post PASSED            [ 55%]
tests/test_group.py::TestGroupAPI::test_group_page_not_found PASSED      [ 57%]
tests/test_group.py::TestGroupAPI::test_group_page_not_auth PASSED       [ 59%]
tests/test_group.py::TestGroupAPI::test_group_page_auth_get PASSED       [ 61%]
tests/test_post.py::TestPostAPI::test_posts_auth_get PASSED              [ 63%]
tests/test_post.py::TestPostAPI::test_post_create_auth_with_invalid_data PASSED [ 65%]
tests/test_post.py::TestPostAPI::test_post_create_auth_with_valid_data PASSED [ 67%]
tests/test_post.py::TestPostAPI::test_post_unauth_create PASSED          [ 69%]
tests/test_post.py::TestPostAPI::test_post_change_auth_with_valid_data[put] PASSED [ 71%]
tests/test_post.py::TestPostAPI::test_post_change_auth_with_valid_data[patch] PASSED [ 73%]
tests/test_post.py::TestPostAPI::test_post_change_not_auth_with_valid_data[put] PASSED [ 75%]
tests/test_post.py::TestPostAPI::test_post_change_not_auth_with_valid_data[patch] PASSED [ 77%]
tests/test_post.py::TestPostAPI::test_post_change_not_author_with_valid_data[put] PASSED [ 79%]
tests/test_post.py::TestPostAPI::test_post_change_not_author_with_valid_data[patch] PASSED [ 81%]
tests/test_post.py::TestPostAPI::test_post_patch_auth_with_invalid_data[put] PASSED [ 83%]
tests/test_post.py::TestPostAPI::test_post_patch_auth_with_invalid_data[patch] PASSED [ 85%]
tests/test_post.py::TestPostAPI::test_post_delete_by_author PASSED       [ 87%]
tests/test_post.py::TestPostAPI::test_post_delete_not_author PASSED      [ 89%]
tests/test_post.py::TestPostAPI::test_post_unauth_delete_current PASSED  [ 91%]
tests/test_settings.py::TestSettings::test_drf_in_installed_apps[rest_framework] PASSED [ 93%]
tests/test_settings.py::TestSettings::test_drf_in_installed_apps[rest_framework.authtoken] PASSED [ 95%]
tests/test_settings.py::TestSettings::test_api_in_installed_apps PASSED  [ 97%]
tests/test_settings.py::TestSettings::test_auth_settings PASSED          [100%]

================================== FAILURES ===================================
_______________________ TestGroupAPI.test_group_create ________________________

self = <tests.test_group.TestGroupAPI object at 0x000002792F984100>
user_client = <rest_framework.test.APIClient object at 0x000002792F9E01C0>
group_1 = <Group: Группа 1>, group_2 = <Group: Группа 2>

    @pytest.mark.django_db(transaction=True)
    def test_group_create(self, user_client, group_1, group_2):
        data = {'title': 'Группа  номер 3'}
        response = user_client.post('/api/v1/groups/', data=data)
>       assert response.status_code == HTTPStatus.METHOD_NOT_ALLOWED, (
            'Убедитесь, что группу можно создавать только через админку, '
            'а при попытке создать ее через API возвращается статус 405.'
        )
E       AssertionError: Убедитесь, что группу можно создавать только через админку, а при попытке создать ее через API возвращается статус 405.
E       assert 400 == <HTTPStatus.METHOD_NOT_ALLOWED: 405>
E         +400
E         -<HTTPStatus.METHOD_NOT_ALLOWED: 405>

tests\test_group.py:77: AssertionError
------------------------------ Captured log call ------------------------------
WARNING  django.request:log.py:224 Bad Request: /api/v1/groups/
=========================== short test summary info ===========================
FAILED tests/test_group.py::TestGroupAPI::test_group_create - AssertionError:...
======================== 1 failed, 48 passed in 9.12s =========================
